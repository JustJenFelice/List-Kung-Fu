var ListKungFu={LayoutWest:$("#mainlayout-west"),LayoutNorth:$("#mainlayout-north"),LayoutEast:$("#mainlayout-east"),LayoutSouth:$("#mainlayout-south"),LayoutCenter:$("#mainlayout-center")};jQuery.expr[":"].Contains=function(g,b,u){return jQuery(g).text().toLowerCase().indexOf(u[3].toLowerCase())>=0};jQuery.expr[":"].HasExactValue=function(g,b,u){return jQuery.trim(jQuery(g).text().toLowerCase())===u[3].toLowerCase()};
$(document).ready(function(){ListKungFu.MainLayout=$("body").layout({defaults:{contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore"},north:{maxSize:92,minSize:92},south:{minSize:30},west:{minSize:300},east:{minSize:100,initClosed:true},center:{minSize:300}});ListKungFu.LayoutSouth.StatusBar();ListKungFu.LayoutCenter.ListItemView({SelectLastList:function(){ListKungFu.LayoutWest.ListView("SelectList")},ContentDimensionsChanged:function(){ListKungFu.MainLayout.resizeContent("center")},
ReinitPanes:function(){ListKungFu.MainLayout.reinitPane()}});ListKungFu.LayoutWest.ListView({ContentDimensionsChanged:function(){ListKungFu.MainLayout.resizeContent("west")},OpenList:function(g,b){ListKungFu.LayoutCenter.Dashboard("Hide");ListKungFu.LayoutCenter.ListItemView("OpenList",b.selectedList)},CloseList:function(){ListKungFu.LayoutCenter.ListItemView("RemoveList")},SelectListItem:function(){ListKungFu.LayoutCenter.ListItemView("SelectListItem")}});ListKungFu.LayoutCenter.Dashboard({ContentDimensionsChanged:function(){ListKungFu.MainLayout.resizeContent("center")},
ReinitPanes:function(){ListKungFu.MainLayout.reinitPane()},OpenList:function(g,b){ListKungFu.LayoutCenter.Dashboard("Hide");ListKungFu.LayoutCenter.ListItemView("OpenList",b.selectedList)}});ListKungFu.LayoutWest.find("#tags").TagView({});$("#dashboard").bind("click",function(){ListKungFu.LayoutCenter.ListItemView("RemoveList");ListKungFu.LayoutCenter.Dashboard("Show");return false});$("#dashboard").trigger("click")});
var Controller=function(g){var b={},u=function(j){var k=$(j).length>0?{}:false;$(j).each(function(i,l){var n=$(l).attr("model"),z=$(l).attr("field"),r=$(l).text();k[n]=k[n]||{};k[n][z]=k[n][z]||[];k[n][z].push(r)});return k};b.ClearFlash=function(){b.flash={notice:"",error:"",warning:"",message:""}};b.ClearFlash();b.SetFlash=function(j){b.flash.notice=j.getResponseHeader("X-Flash-Notice")||"";b.flash.error=j.getResponseHeader("X-Flash-Error")||"";b.flash.warning=j.getResponseHeader("X-Flash-Warning")||
"";b.flash.message=j.getResponseHeader("X-Flash-Message")||"";if(typeof g.onFlashUpdate==="function")if(b.flash.notice!==""||b.flash.error!==""||b.flash.warning!==""||b.flash.message!=="")g.onFlashUpdate(b.flash.notice,b.flash.error,b.flash.warning,b.flash.message)};b.baseURL=g.base_url||document.location.protocol+"//"+document.location.hostname+(document.location.port!==""?":"+document.location.port:"")+"/";b.route=g.route;b.DefaultCallback=function(j,k,i,l){b.SetFlash(l);var n=$.parseJSON($(k).find("JSON").text()),
z=$(k).find("Template").text();k=u($(k).find("Error"));typeof j==="function"&&j(z,n,i,l,k);b.ClearFlash()};b.DefaultErrorCallback=function(){$('<div id="dialog-confirm"> \t\t\t<span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"> \t\t\t</span>Something went wrong :-( Either try again or reload the page!</div>').dialog({resizable:false,modal:true,buttons:{"Try again":function(){$(this).dialog("close")},Reload:function(){window.location.reload()}}})};b.ConstructRoute=function(j){for(var k=
"",i="",l=0;l<b.route.length;l++){k+=b.route[l];i=j[b.route[l]]||"";if(i!=="")k+="/"+i;if(l!==b.route.length-1)k+="/"}return k};b.Index=function(j){var k=j.successCallback||null,i=b.ConstructRoute(j);$.ajax({url:b.baseURL+i,dataType:"xml",type:"GET",processData:true,contentType:"application/json",data:j.send,success:function(l,n,z){b.DefaultCallback(k,l,n,z)},error:function(l,n,z){b.DefaultErrorCallback(l,n,z)}})};b.Show=function(j){var k=j.successCallback||null;j=b.ConstructRoute(j);$.ajax({url:b.baseURL+
j,dataType:"xml",type:"GET",processData:false,contentType:"application/json",success:function(i,l,n){b.DefaultCallback(k,i,l,n)},error:function(i,l,n){b.DefaultErrorCallback(i,l,n)}})};b.New=function(j){var k=j.successCallback||null;j=b.ConstructRoute(j);$.ajax({url:b.baseURL+j+"/new",dataType:"xml",type:"GET",processData:false,contentType:"application/json",success:function(i,l,n){b.DefaultCallback(k,i,l,n)},error:function(i,l,n){b.DefaultErrorCallback(i,l,n)}})};b.Create=function(j){var k=j.successCallback||
null,i=b.ConstructRoute(j);j=JSON.stringify(j.send);$.ajax({url:b.baseURL+i,dataType:"xml",type:"POST",processData:false,contentType:"application/json",data:j,success:function(l,n,z){b.DefaultCallback(k,l,n,z)},error:function(l,n,z){b.DefaultErrorCallback(l,n,z)}})};b.Edit=function(j){var k=j.successCallback||null;j=b.ConstructRoute(j);$.ajax({url:b.baseURL+j+"/edit",dataType:"xml",type:"GET",parseData:false,contentType:"application/json",success:function(i,l,n){b.DefaultCallback(k,i,l,n)},error:function(i,
l,n){b.DefaultErrorCallback(i,l,n)}})};b.Update=function(j){var k=j.successCallback||null,i=b.ConstructRoute(j);j=JSON.stringify(j.send);j=j.replace(/\\u000a/g,"\\n");$.ajax({url:b.baseURL+i,dataType:"xml",type:"POST",processData:false,contentType:"application/json",data:j,beforeSend:function(l){l.setRequestHeader("X-Http-Method-Override","PUT")},success:function(l,n,z){b.DefaultCallback(k,l,n,z)},error:function(l,n,z){b.DefaultErrorCallback(l,n,z)}})};b.Destroy=function(j){var k=j.successCallback||
null;j=b.ConstructRoute(j);$.ajax({url:b.baseURL+j,dataType:"xml",type:"POST",processData:false,contentType:"application/json",beforeSend:function(i){i.setRequestHeader("X-Http-Method-Override","DELETE")},success:function(i,l,n){b.DefaultCallback(k,i,l,n)},error:function(i,l,n){b.DefaultErrorCallback(i,l,n)}})};return b},List=Controller({route:["lists"],onFlashUpdate:function(g,b){ListKungFu.LayoutSouth.StatusBar("SetAlert",b);ListKungFu.LayoutSouth.StatusBar("SetNotice",g)}}),ListListItem=Controller({route:["lists",
"list_items"],onFlashUpdate:function(g,b){ListKungFu.LayoutSouth.StatusBar("SetAlert",b);ListKungFu.LayoutSouth.StatusBar("SetNotice",g)}}),ListItem=Controller({route:["list_items"],onFlashUpdate:function(g,b){ListKungFu.LayoutSouth.StatusBar("SetAlert",b);ListKungFu.LayoutSouth.StatusBar("SetNotice",g)}}),Tag=Controller({route:["tags"],onFlashUpdate:function(g,b){ListKungFu.LayoutSouth.StatusBar("SetAlert",b);ListKungFu.LayoutSouth.StatusBar("SetNotice",g)}});
jQuery(function(g){var b=g("meta[name=csrf-token]").attr("content"),u=g("meta[name=csrf-param]").attr("content");g.fn.extend({triggerAndReturn:function(k,i){var l=new g.Event(k);this.trigger(l,i);return l.result!==false},callRemote:function(){var k=this,i=k.attr("method")||k.attr("data-method")||"GET",l=k.attr("action")||k.attr("href"),n=k.attr("data-type")||"script";if(l===undefined)throw"No URL specified for remote call (action or href must be present).";else{if(k.triggerAndReturn("ajax:before")){var z=
k.is("form")?k.serializeArray():[];g.ajax({url:l,data:z,dataType:n,type:i.toUpperCase(),beforeSend:function(r){k.trigger("ajax:loading",r)},success:function(r,G,q){k.trigger("ajax:success",[r,G,q])},complete:function(r){k.trigger("ajax:complete",r)},error:function(r,G,q){k.trigger("ajax:failure",[r,G,q])}})}k.trigger("ajax:after")}}});g("body").delegate("a[data-confirm], button[data-confirm], input[data-confirm]","click.rails",function(){var k=g(this);if(k.triggerAndReturn("confirm"))if(!confirm(k.attr("data-confirm")))return false});
g("form[data-remote]").live("submit.rails",function(k){g(this).callRemote();k.preventDefault()});g("a[data-remote],input[data-remote]").live("click.rails",function(k){g(this).callRemote();k.preventDefault()});g("a[data-method]:not([data-remote])").live("click.rails",function(k){var i=g(this),l=i.attr("href");i=i.attr("data-method");l=g('<form method="post" action="'+l+'"></form>');i='<input name="_method" value="'+i+'" type="hidden" />';if(u!==undefined&&b!==undefined)i+='<input name="'+u+'" value="'+
b+'" type="hidden" />';l.hide().append(i).appendTo("body");k.preventDefault();l.submit()});var j=function(){g(this).find("input[data-disable-with]").each(function(){var k=g(this);k.data("enable-with",k.val()).attr("value",k.attr("data-disable-with")).attr("disabled","disabled")})};g("form[data-remote]:has(input[data-disable-with])").live("ajax:before.rails",j);g("form:not([data-remote]):has(input[data-disable-with])").live("submit.rails",j);g("form[data-remote]:has(input[data-disable-with])").live("ajax:complete.rails",
function(){g(this).find("input[data-disable-with]").each(function(){var k=g(this);k.removeAttr("disabled").val(k.data("enable-with"))})});j=g().jquery;if(j==="1.4"||j==="1.4.1"||j==="1.4.2")alert("This rails.js does not support the jQuery version you are using. Please read documentation.")});
(function(g){g.confirmationDialog=function(b,u,j,k){dialog=g('<div id="dialog-confirm"> \t\t\t<span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"> \t\t\t</span>'+k+"</div>").dialog({resizable:false,modal:true,autoOpen:false,width:400,open:function(){dialog.parent().find(".ui-dialog-buttonpane > button").first().focus()}});k={};k[b]=function(){g(dialog).dialog("close");u()};k[j]=function(){g(dialog).dialog("close")};dialog.dialog("option","buttons",k);dialog.parent().find(".ui-dialog-buttonpane > button").bind("keydown",
"right",function(i){i=g(i.target);if(i.next("button").length>0){i.blur();i.next("button").focus()}return false});dialog.parent().find(".ui-dialog-buttonpane > button").bind("keydown","left",function(i){i=g(i.target);if(i.prev("button").length>0){i.blur();i.prev("button").focus()}return false});return dialog}})(jQuery);
(function(){var g=function(){var b=null,u=function(){b._trigger("ContentDimensionsChanged",0,{})};return{options:{},Show:function(){b.Hide();b.header=$('<div id="dashboard-header" class="header"><h1>Dashboard</h1></div>');b.toolbar=$('<div id="dashboard-toolbar"><input type="text" id="dashboard-search" value=""/></div>');b.wrapper=$('<div class="ui-layout-content" id="dashboard-view"></div>');b.today=$('<div id="today" class="schedule-column" data-type="scheduleColumn"><h1>Today</h1></div>');b.tomorrow=
$('<div id="tomorrow" class="schedule-column" data-type="scheduleColumn"><h1>Tomorrow</h1></div>');b.thisweek=$('<div id="thisweek" class="schedule-column" data-type="scheduleColumn"><h1>This Week</h1></div>');b.nextweek=$('<div id="nextweek" class="schedule-column" data-type="scheduleColumn"><h1>Next Week</h1></div>');b.later=$('<div id="later" data-type="scheduleColumn"><h1>Later</h1></div>');b.element.append(b.header);b.header.append(b.toolbar);b.element.append(b.wrapper);b.wrapper.append(b.today);
b.wrapper.append(b.tomorrow);b.wrapper.append(b.thisweek);b.wrapper.append(b.nextweek);b.nextweek.append(b.later);b.wrapper.append('<div style="clear:both;">&nbsp;</div>');b.toolbar.append('<div id="dashboard-search-cancel">&nbsp;</div><div style="clear:both;">&nbsp;</div>');ListItem.Index({successCallback:function(j,k){$.each(k,function(i,l){var n=$($.mustache(j,l.list_item));switch(l.list_item.deadline_category){case "today":b.today.append(n);break;case "tomorrow":b.tomorrow.append(n);break;case "this week":b.thisweek.append(n);
break;case "next week":b.later.before(n);break;default:b.later.append(n)}n.find(".dashboard-list-item-title").bind("click",function(){b._trigger("OpenList",0,{selectedList:l.list_item})});n.find(".dashboard-item-more").bind("click",function(){b._trigger("OpenList",0,{selectedList:l.list_item})});n.find(".dashboard-item-completed").bind("click",function(){$that=$(this);$that.find(".confirmation-completed").remove();var z=$('<div class="confirmation-completed">Completed? \t\t\t\t\t\t\t\t\t<span class="yes">Yes</span> / <span class="no">NO</span></div>');
$that.append(z);$that.animate({width:"100%",paddingLeft:"14px"},200);z.find(".yes").bind("click",function(){l.list_item.completed=true;ListListItem.Update({successCallback:function(){n.stop(true,true).hide("slow",function(){n.remove()})},lists:l.list_item.list_id,list_items:l.list_item.id,send:l});z.find(".no").trigger("click");return false});z.find(".no").bind("click",function(){$that.animate({width:"12px",paddingLeft:"0"},200,function(){z.remove()});return false})});n.find(".dashboard-item-more").bind("click",
function(){b._trigger("OpenList",0,{selectedList:l.list_item})})});$('div[data-type~="scheduleColumn"]').each(function(){$(this).children(".dashboard-item").length===0&&$(this).children("h1").after('<p class="nothing-todo">no items scheduled</p>')});b._trigger("ReinitPanes",0,{});u()},send:{show:"dashboard"}});b.toolbar.find("#dashboard-search").bind("keyup",function(){var j=$(this).val();if(j==="")b.wrapper.find(".dashboard-item").show();else{b.wrapper.find(".dashboard-item:not(:Contains('"+j+"'))").hide();
b.wrapper.find(".dashboard-item:Contains('"+j+"')").show()}});b.toolbar.find("#dashboard-search-cancel").bind("click",function(){b.toolbar.find("#dashboard-search").val("").trigger("keyup")});u()},Hide:function(){b.element.children().remove()},_create:function(){b=this},destroy:function(){}}}();$.widget("ui.Dashboard",g)})();
(function(g){function b(u){if(typeof u.data==="string"){var j=u.handler,k=u.data.toLowerCase().split(" ");u.handler=function(i){if(!(this!==i.target&&(/textarea|select/i.test(i.target.nodeName)||i.target.type==="text"))){var l=i.type!=="keypress"&&g.hotkeys.specialKeys[i.which],n=String.fromCharCode(i.which).toLowerCase(),z="",r={};if(i.altKey&&l!=="alt")z+="alt+";if(i.ctrlKey&&l!=="ctrl")z+="ctrl+";if(i.metaKey&&!i.ctrlKey&&l!=="meta")z+="meta+";if(i.shiftKey&&l!=="shift")z+="shift+";if(l)r[z+l]=
true;else{r[z+n]=true;r[z+g.hotkeys.shiftNums[n]]=true;if(z==="shift+")r[g.hotkeys.shiftNums[n]]=true}l=0;for(n=k.length;l<n;l++)if(r[k[l]])return j.apply(this,arguments)}}}}g.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",
106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};g.each(["keydown","keyup","keypress"],function(){g.event.special[this]={add:b}})})(jQuery);
(function(){var g=function(){var b=null,u=function(){b._trigger("ContentDimensionsChanged",0,{})},j=function(m){var x=m.find("#deadline-settings-wrapper"),D=m.find("#save-deadline");D.bind("click keydown","return",function(){D.data("settings-visible")?x.hide("fast",function(){x.find(".deadline-button").first();D.data("settings-visible",false)}):x.show("fast",function(){x.find(".deadline-button").first().focus();D.data("settings-visible",true)});return false})},k=function(){$("#custom-deadline-display").datepicker({minDate:new Date,
altField:"#custom-deadline-value",altFormat:"yy,mm,dd",dateFormat:"dd.mm.yy"});$("#custom-deadline-value").val($.datepicker.formatDate("yy,mm,dd",new Date));$("#custom-deadline-display").val($.datepicker.formatDate("dd.mm.yy",new Date))},i=function(m,x,D){var t=$($.mustache(x,m.list_item));t.data("data",m);t.data("isFullsize",false);D?b.listItemList.prepend(t):b.listItemList.append(t);t.find(".handle").height(t.height());t.bind("keydown","space",function(){b.toolbar.find("#list-item-completed").effect("puff",
{},300,function(){$(this).show();t.find(".undo").length===0?b.toolbar.find("#list-item-completed").trigger("click"):t.find(".undo").trigger("click")})});t.bind("keydown","del",function(){b.toolbar.find("#list-item-delete").effect("puff",{},300,function(){$(this).show();b.toolbar.find("#list-item-delete").trigger("click")})});t.bind("focus",function(I){if($(I.target).hasClass("row")){b.listItemList.find(".row").removeClass("selected-row");$(I.target).addClass("selected-row");$(I.target).data("data");
if(b.toolbar)$(I.target).data("isFullsize")===true?b.toolbar.find("#list-item-fullsize").button("option","icons",{primary:"ui-icon-zoomout"}):b.toolbar.find("#list-item-fullsize").button("option","icons",{primary:"ui-icon-zoomin"});var J=$(I.target);I=$(I.target).data("data");b.selectedListItem={element:J,data:I}}});t.bind("keydown","down",function(I){I.preventDefault();$(I.target).nextAll("div:visible").first().focus();return false});t.bind("keydown","up",function(I){I.preventDefault();$(I.target).prevAll("div:visible").first().focus();
return false});t.bind("keydown dblclick","return",function(){if(t.find("form").length>0)return false;b.toolbar.find("#list-item-edit").effect("puff",{},300,function(){$(this).show()});b.listItemList.find(".row").find("form").hide("slow",function(){$(this).remove()});ListListItem.Edit({successCallback:function(I){var J=$(I),M=t.data("isFullsize");b.listItemList.find(".row").hide();b.selectedListItem.element.show();J.hide();b.selectedListItem.element.prepend(J);J.find("textarea").markItUp(mySettings);
j(J);k();M===false&&l(t);b.selectedListItem.element.find(".handle").hide();J.show("slow",function(){J.find("textarea").focus()});J.find("textarea").bind("keydown","esc",function(){J.find("#cancel-edit").trigger("click")});J.find(".deadline-button").bind("keydown click","return",function(P){P.preventDefault();var Q=t.find("form").serializeForm();Q.list_item.deadlineType=$(P.target).attr("data-deadline");Q.list_item.customDeadlineValue=$("#custom-deadline-value").val();ListListItem.Update({send:Q,successCallback:function(U,
V){J.hide("slow",function(){$(this).remove();b.selectedListItem.element.find(".handle").show();t.find(".list-item-content").html(V.list_item.body_rendered);t.find(".list-item-deadline").html(V.list_item.deadline_in_words);t.find(".handle").height(t.find(".list-item-content").height());M===false&&l(t);b.selectedListItem={element:t,data:V};t.data("data",V);b.listItemList.find(".row").show();t.focus()})},lists:b.selectedListItem.data.list_item.list_id,list_items:b.selectedListItem.data.list_item.id});
return false});J.find("#cancel-edit").bind("keydown click","return",function(P){P.preventDefault();b.selectedListItem.element.find(".handle").show();J.hide("slow",function(){$(this).remove();M===false&&l(t);b.listItemList.find(".row").show();t.focus()});return false});return false},lists:b.selectedListItem.data.list_item.list_id,list_items:b.selectedListItem.data.list_item.id})});t.bind("keydown","left",function(){b._trigger("SelectLastList",0,{})});t.bind("keydown","shift+return",function(){b.toolbar.find("#list-item-new").effect("puff",
{},300,function(){$(this).show();E()})});t.bind("keydown","l",function(){b.toolbar.find("#list-item-fullsize").effect("puff",{},300,function(){b.toolbar.find("#list-item-fullsize").trigger("click");$(this).show()});return false});ListKungFu&&ListKungFu.LayoutCenter&&t.draggable({helper:function(){return $('<div class="list-item-drag-helper">'+t.find(".list-item-content").text().substring(0,20)+" . . .</div>").get(0)},appendTo:ListKungFu.LayoutCenter,revert:"invalid",handle:".handle",cursorAt:{top:10,
left:10},iframeFix:true,start:function(){document.onselectstart=function(){return false}},stop:function(){document.onselectstart=null}});n(t)},l=function(m){if(m.data("isFullsize")===true){n(m,false);m.data("isFullsize",false);b.toolbar.find("#list-item-fullsize").button("option","icons",{primary:"ui-icon-zoomin"})}else{n(m,true);m.data("isFullsize",true);b.toolbar.find("#list-item-fullsize").button("option","icons",{primary:"ui-icon-zoomout"})}},n=function(m,x){m.height()>150&&!x?m.height(150):m.height("auto");
u()},z=function(m,x){ListListItem.Destroy({successCallback:function(){m.hide("slow",function(){var D=m.next(".row");D.length>0||(D=m.prev(".row"));D.focus();m.remove();b.toolbar.find("#list-item-search").trigger("ClearValue")})},lists:x.list_item.list_id,list_items:x.list_item.id})},r=function(m,x){x.list_item.completed=true;ListListItem.Update({successCallback:function(){var D="list-item-undo-"+x.list_item.id;m.find(".list-item-wrapper").hide("slow",function(){var t=$('<div class="undo clickable"><img src="/images/undo-icon.gif"/>Undo</div>');
t.bind("click",function(){G(m,x,D)});m.append(t);n(m);t.delay(5E3,D).queue(D,function(){m.hide("slow",function(){m.remove()})}).dequeue(D);b.toolbar&&b.toolbar.find("#showCompleted").get(0).checked===true&&q(true);m.focus()})},lists:x.list_item.list_id,list_items:x.list_item.id,send:x})},G=function(m,x,D){D!==""&&m.clearQueue(D);x.list_item.completed=false;ListListItem.Update({successCallback:function(){m.find(".undo").hide("slow",function(){$(this).remove()});m.find(".list-item-wrapper").show("slow",
function(){n(m)});b.toolbar&&b.toolbar.find("#showCompleted").get(0).checked===true&&q(true)},lists:x.list_item.list_id,list_items:x.list_item.id,send:x})},q=function(m){if(m===true){if(b.completedList){b.completedList.remove();b.completedList=null}b.completedList=$('<div id="completedList"></div>');m=b.element.data("data-list");ListListItem.Index({successCallback:function(x,D){$.each(D,function(t,I){b.completedList.append("<div>"+I.list_item.body_rendered+"</div>")});D.length===0&&b.completedList.append("<div>No completed items</div>");
b.wrapper.prepend(b.completedList)},send:{show:"completed"},lists:m.list.id})}else{b.completedList.remove();b.completedList=null}},F=function(){b.header.html("");b.toolbar=$('<div id="list-item-toolbar"> \t\t\t\t<div id="list-name"></div><div id="list-item-toolbar-buttons"> \t\t\t\t<button id="list-item-completed">Completed [space]</button> \t\t\t\t<button id="list-item-new">Create [shift+return]</button> \t\t\t\t<button id="list-item-delete">Delete [del]</button> \t\t\t\t<button id="list-item-edit">Edit [return]</button> \t\t\t\t<button id="list-item-fullsize">Fullsize [l]</button> \t\t\t\t<input type="input" id="list-item-search"/> \t\t\t\t<input type="checkbox" id="showCompleted"/> \t\t\t\t<label for="showCompleted">Show Completed Items</label> \t\t\t\t<div id="list-item-search-cancel">&nbsp;</div> \t\t\t\t</div></div>');
b.listName=b.toolbar.find("#list-name");b.toolbar.find("#list-item-new").button({text:false,icons:{primary:"ui-icon-plusthick"}});b.toolbar.find("#list-item-edit").button({text:false,icons:{primary:"ui-icon-pencil"}});b.toolbar.find("#list-item-completed").button({text:false,icons:{primary:"ui-icon-check"}});b.toolbar.find("#list-item-delete").button({text:false,icons:{primary:"ui-icon-trash"}});b.toolbar.find("#list-item-fullsize").button({text:false,icons:{primary:"ui-icon-zoomin"}});b.toolbar.find("#list-item-new").bind("click",
function(){E()});b.toolbar.find("#showCompleted").bind("change",function(m){q(m.target.checked);b.selectedListItem.element.focus()});b.toolbar.find("#list-item-completed").bind("click",function(){r(b.selectedListItem.element,b.selectedListItem.data)});b.toolbar.find("#list-item-delete").bind("click",function(){var m=function(){z(b.selectedListItem.element,b.selectedListItem.data)};if(typeof b.deleteDialog==="undefined")b.deleteDialog=$.confirmationDialog("Delete List Item",m,"Cancel","Do you really want to delete?");
b.deleteDialog.dialog("open")});b.toolbar.find("#list-item-edit").bind("click",function(){b.selectedListItem.element.trigger("dblclick")});b.toolbar.find("#list-item-fullsize").bind("click",function(){l(b.selectedListItem.element)});b.toolbar.find("#list-item-search").bind("keyup",function(){var m=$(this).val();if(m==="")b.listItemList.find(".row").show();else{b.listItemList.find(".row:not(:Contains('"+m+"'))").hide();b.listItemList.find(".row:Contains('"+m+"')").show()}});b.toolbar.find("#list-item-search-cancel").bind("click",
function(){b.toolbar.find("#list-item-search").val("").trigger("keyup")});b.toolbar.find("#list-item-search").bind("ClearValue",function(m){$(m.target).val("");b.listItemList.find(".row").show()});b.header.append(b.toolbar)},E=function(){var m=b.element.data("data-list");ListListItem.New({successCallback:function(x){var D=$(x);b.listItemList.prepend(D);j(D);k();D.find("textarea").markItUp(mySettings);D.find("textarea").focus();b.listItemList.find(".row").hide();D.find("#cancel-edit").bind("click",
function(t){t.preventDefault();D.hide("slow",function(){$(this).remove();b.listItemList.find(".row").show();b.listItemList.find(".row").first().focus()})});D.find(".deadline-button").bind("click",function(t){t.preventDefault();var I=D.serializeForm();I.list_item.body=I.list_item.body.replace(/\n/g,"\n\n");I.list_item.deadlineType=$(t.target).attr("data-deadline");I.list_item.customDeadlineValue=$("#custom-deadline-value").val();ListListItem.Create({send:I,successCallback:function(J,M){D.hide("slow",
function(){i(M,J,true);$(this).remove();b.toolbar.find("#list-item-search").trigger("ClearValue");b.listItemList.find(".row").show();b.listItemList.find(".row").first().focus();b.listItemList.find(".row").first().find(".handle").height(b.listItemList.find(".row").first().find(".list-item-content").height())})},lists:m.list.id});return false});D.find("textarea").bind("keydown","esc",function(){D.find("#cancel-edit").trigger("click")})},lists:m.list.id})};return{options:{},_create:function(){b=this;
b.wrapper=$('<div class="ui-layout-content" id="list-item-wrapper"></div>');b.listItemList=$('<div id="list-item-list"></div>');b.header=$('<div class="header"></div>');b.element.append(b.header);b.element.append(b.wrapper);b.wrapper.append(b.listItemList);u();$(document).bind("keydown","c",function(){var m=b.toolbar.find("#showCompleted");if(m.length>0){if(m.get(0).checked===true)m.get(0).checked=false;else m.get(0).checked=true;m.trigger("change")}});$(document).bind("keyup","f",function(){b.toolbar.find("#list-item-search").focus()})},
destroy:function(){b.children().remove();$(document).unbind("keydown","c");$(document).unbind("keyup","f")},RemoveList:function(){b.wrapper.remove();b.header.remove();$(document).unbind("keydown","c");$(document).unbind("keyup","f")},OpenList:function(m){b.RemoveList();b._create();b.element.data("data-list",m);ListListItem.Index({successCallback:function(x,D){F();$.each(D,function(t,I){i(I,x)});m.id?b.listItemList.find(".row").each(function(){var t=$(this);if(t.data("data").list_item.id===m.id){t.focus();
return false}}):b.listItemList.find(".row").first().focus();b.listItemList.find(".row").length===0&&E();b.listName.text(m.list.title)},lists:m.list.id});b._trigger("ReinitPanes",0,{})},SelectListItem:function(){b.selectedListItem?b.selectedListItem.element.effect("highlight",{},300,function(){$(this).show();$(this).focus()}):b.listItemList.find(".row").first().effect("highlight",{},300,function(){$(this).show();$(this).focus()})}}}();$.widget("ui.ListItemView",g)})();
(function(){var g=function(){var b=null,u=function(q,F){for(var E in F){var m=F[E],x;for(x in m){for(var D=m[x],t=$('<div class="error_explanation"><ul></ul></div>'),I=t.find("ul"),J=q.find("*[name="+(E+"["+x+"]")+"]"),M=0;M<D.length;M++){J.parent(".field").addClass("field_with_errors");I.append("<li>"+D[M]+"</li>")}J.parent(".field").append(t)}}},j=function(q){q.find(".field").removeClass("field_with_errors");q.find(".error_explanation").remove()},k=function(q){var F=b.selectedList.element.next(),
E=b.selectedList.element.prev();q=q||0;List.Destroy({successCallback:function(){b.selectedList.element.delay(q).fadeOut(function(){$(this).remove();F.length>0?F.focus():E.focus()});b._trigger("CloseList",0,{})},lists:b.selectedList.data.list.id})},i=function(){var q=$('<div id="list-toolbar"> \t\t\t\t<button id="list-new">Create [shift+return]</button> \t\t\t\t<button id="list-delete">Delete [del]</button> \t\t\t\t<button id="list-edit">Edit [space]</button> \t\t\t\t<input type="text" id="search-list" /> \t\t\t\t<div id="list-search-cancel">&nbsp;</div> \t\t\t\t</div>');
b.element.find("div.header").append(q);q.find("#list-new").button({text:false,icons:{primary:"ui-icon-plusthick"}});q.find("#list-delete").button({text:false,icons:{primary:"ui-icon-trash"}});q.find("#list-edit").button({text:false,icons:{primary:"ui-icon-pencil"}});q.find("#list-delete").bind("click",function(F){if(b.selectedList!==null){if(typeof b.deleteDialog==="undefined")b.deleteDialog=$.confirmationDialog("Delete List",function(){if(b.listForm!==null){b.listForm.bind("FormHidden",function(){k(1E3)});
G()}else k()},"Cancel","Do you really want to delete?");b.deleteDialog.dialog("open")}else $("#notice").text("Select the list which you want to delete").fadeIn().delay(5E3).fadeOut();$(F.target).blur();return false});q.find("#list-new").bind("click",function(F){b.listlist.hide("slide",{direction:"left"},"slow",function(){if(b.listForm!=null){b.listForm.remove();b.listForm=null}b.listForm=$('<div class="ui-layout-content" id="list-form"></div>');b.wrapper.append(b.listForm);List.New({successCallback:function(E,
m){b.listForm.append(E);b.listForm.show("slide",{direction:"left"},"slow",function(){b.listForm.find("#list_title").first().focus()});b._trigger("CloseList",0,{});b.listForm.find("#list-back-button").bind("click",function(){G()});b.listForm.find("#list_title").bind("keydown","esc",function(){G()});b.listForm.bind("submit",function(x){x.preventDefault();x=$(this).find("form").serializeForm();m.list=x.list;List.Create({send:m,successCallback:function(D,t,I,J,M){j(b.listForm);if(M===false){G(t,D);b.toolbar.find("#search-list").trigger("ClearValue")}else u(b.listForm,
M)}})});b.selectedList=null}})});$(F.target).blur();return false});q.find("#search-list").bind("keyup",function(){var F=$(this).val();if(F==="")b.listlist.find(".row").show();else{b.listlist.find(".row:not(:Contains('"+F+"'))").hide();b.listlist.find(".row:Contains('"+F+"')").show()}});q.find("#list-search-cancel").bind("click",function(){q.find("#search-list").val("").trigger("keyup")});q.find("#search-list").bind("ClearValue",function(F){$(F.target).val("");b.listlist.find(".row").show()});q.find("#list-edit").bind("click",
function(){b.listlist.hide("slide",{direction:"left"},"slow",function(){if(b.listForm!=null){b.listForm.remove();b.listForm=null}b.listForm=$('<div class="ui-layout-content" id="list-form"></div>');b.wrapper.append(b.listForm);List.Edit({successCallback:function(F){b.listForm.append(F);b.listForm.show("slide",{direction:"left"},"slow",function(){b.listForm.find("#list_title").first().focus()});b.listForm.find("#list-back-button").bind("click",function(){G()});b.listForm.find("#list_title").bind("keydown",
"esc",function(){G()});b.listForm.bind("submit",function(E){E.preventDefault();E=$(this).find("form").serializeForm();List.Update({send:E,successCallback:function(m,x,D,t,I){j(b.listForm);I===false?G(x,m):u(b.listForm,I)},lists:b.selectedList.data.list.id});return false})},lists:b.selectedList.data.list.id})})});return q},l=function(q,F){var E=$($.mustache(F,q.list));E.attr("tabindex",0);E.data("data",q);E.addClass("row");E.bind("keydown","down",function(m){m.preventDefault();$(m.target).nextAll("div:visible").first().focus();
return false});E.bind("keydown","up",function(m){m.preventDefault();$(m.target).prevAll("div:visible").first().focus();return false});E.bind("focus",function(m){b.listlist.find(".row").removeClass("selected-row");$(m.target).addClass("selected-row");b.selectedList={element:$(m.target),data:$(m.target).data("data")}});E.bind("keydown dblclick","return",function(m){b._trigger("OpenList",0,{selectedList:$(m.target).data("data")})});E.bind("keydown","right",function(){b._trigger("SelectListItem",0,{})});
E.bind("keydown","shift+return",function(){b.toolbar.find("#list-new").effect("puff",{},300,function(){$(this).show();$(this).trigger("click")});return false});E.bind("keydown","del",function(){b.toolbar.find("#list-delete").effect("puff",{},300,function(){$(this).show()}).trigger("click")});E.bind("keydown","space",function(){b.toolbar.find("#list-edit").effect("puff",{},300,function(){$(this).show();$(this).trigger("click")});return false});E.droppable({activeClass:"ui-state-default",hoverClass:"ui-state-hover",
accept:".list-item",drop:function(m,x){var D=x.draggable.data("data"),t=$(this).data("data");D={list_item:{body:D.list_item.body.replace(/\n/g,"\n\n")}};ListListItem.Create({send:D,successCallback:function(){$(m.target).find(".fake-drop").hide("slow",function(){$(this).remove();E.effect("highlight",{},3E3)})},lists:t.list.id})},over:function(m,x){var D=$('<div class="fake-drop"></div>');D.html("<p>"+x.helper.text()+"</p>");$(m.target).append(D)},out:function(m){$(m.target).find(".fake-drop").remove()}});
return E},n=function(){b.selectedList?b.selectedList.element.effect("highlight",{},300,function(){$(this).show();$(this).focus()}):b.listlist.find(".row").first().effect("highlight",{},300,function(){$(this).show();$(this).focus()})},z=function(){$(document).bind("keydown","ctrl+l",function(){n(w)});$(document).bind("keydown","ctrl+f",function(){b.toolbar.find("#search-list").focus()});$(document).bind("keydown","shift+f",function(){b.toolbar.find("#search-list").focus();return false})},r=function(q,
F){b.listlist.show("slide",{direction:"left"},"slow",function(){if(q){var E=l(q,F);b.selectedList===null||b.selectedList.data.list.id!==q.list.id?b.listlist.prepend(E):b.selectedList.element.replaceWith(E);b.selectedList={data:q,element:E}}b.selectedList&&b.selectedList.element.focus()})},G=function(q,F){b.listForm.hide("slide",{direction:"left"},"slow",function(){r(q,F);b.listForm.trigger("FormHidden");b.selectedList?b.selectedList.element.focus():b.listlist.find(".row").first().focus();b.listForm.remove();
b.listForm=null})};return{options:{},selectedList:null,_create:function(){b=this;b.wrapper=b.element.find("div#list-wrapper");b.toolbar=i(b);b.listForm=null;List.Index({successCallback:function(q,F){b.wrapper.find(".row").remove();b.listlist=$('<div id="list-list"></div>');b.wrapper.append(b.listlist);for(var E=0;E<F.length;E++)b.listlist.append(l(F[E],q));b._trigger("ContentDimensionsChanged",0,{});b.listlist.find(".row").first().focus()}});z()},SelectList:function(){n(this)},destroy:function(){b.toolbar.remove();
b.listForm.remove();b.wrapper.find(".row").remove()}}}();$.widget("ui.ListView",g)})();(function(g){g.fn.serializeForm=function(){var b=g(this).find('*[name*="]"]'),u={};g.each(b,function(j,k){var i=g(k),l=i.get(0).name.split("[")[0],n=i.get(0).name.split("[")[1];n=n.replace("]","");i=i.val();u[l]=u[l]||{};u[l][n]=i});return u}})(jQuery);
(function(){var g=function(){return{options:{},_create:function(){this.ajaxLoader=$('<div id="ajax-indicator"> \t\t\t\t\t\t<img src="/images/ajax-loader.gif" class="ajax-indicator" /> Loading ... \t\t\t\t\t\t</div>');this.notice=$('<p id="notice"></p>');this.alert=$('<p id="alert"></p>');this.element.append(this.ajaxLoader);this.element.append(this.notice);this.element.append(this.alert);this.notice.hide(function(b){$(b.target).html("")});this.alert.hide(function(b){$(b.target).html("")});this.ajaxLoader.bind("ajaxSend",
function(){$(this).show()}).bind("ajaxComplete",function(){$(this).hide()})},SetNotice:function(b){this.notice.text(b);this.notice.fadeIn().delay(2E3).fadeOut(function(){$(this).text("")})},SetAlert:function(b){this.alert.text(b);this.alert.fadeIn().delay(2E3).fadeOut(function(){$(this).text("")})},destroy:function(){widget.ajaxLoader.remove();widget.notice.remove();widget.alert.remove()}}}();$.widget("ui.StatusBar",g)})();if(!this.JSON)this.JSON={};
(function(){function g(r){return r<10?"0"+r:r}function b(r){k.lastIndex=0;return k.test(r)?'"'+r.replace(k,function(G){var q=n[G];return typeof q==="string"?q:"\\u"+("0000"+G.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+r+'"'}function u(r,G){var q,F,E,m,x=i,D,t=G[r];if(t&&typeof t==="object"&&typeof t.toJSON==="function")t=t.toJSON(r);if(typeof z==="function")t=z.call(G,r,t);switch(typeof t){case "string":return b(t);case "number":return isFinite(t)?String(t):"null";case "boolean":case "null":return String(t);
case "object":if(!t)return"null";i+=l;D=[];if(Object.prototype.toString.apply(t)==="[object Array]"){m=t.length;for(q=0;q<m;q+=1)D[q]=u(q,t)||"null";E=D.length===0?"[]":i?"[\n"+i+D.join(",\n"+i)+"\n"+x+"]":"["+D.join(",")+"]";i=x;return E}if(z&&typeof z==="object"){m=z.length;for(q=0;q<m;q+=1){F=z[q];if(typeof F==="string")if(E=u(F,t))D.push(b(F)+(i?": ":":")+E)}}else for(F in t)if(Object.hasOwnProperty.call(t,F))if(E=u(F,t))D.push(b(F)+(i?": ":":")+E);E=D.length===0?"{}":i?"{\n"+i+D.join(",\n"+i)+
"\n"+x+"}":"{"+D.join(",")+"}";i=x;return E}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+g(this.getUTCMonth()+1)+"-"+g(this.getUTCDate())+"T"+g(this.getUTCHours())+":"+g(this.getUTCMinutes())+":"+g(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var j=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
k=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i,l,n={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},z;if(typeof JSON.stringify!=="function")JSON.stringify=function(r,G,q){var F;l=i="";if(typeof q==="number")for(F=0;F<q;F+=1)l+=" ";else if(typeof q==="string")l=q;if((z=G)&&typeof G!=="function"&&(typeof G!=="object"||typeof G.length!=="number"))throw Error("JSON.stringify");return u("",
{"":r})};if(typeof JSON.parse!=="function")JSON.parse=function(r,G){function q(E,m){var x,D,t=E[m];if(t&&typeof t==="object")for(x in t)if(Object.hasOwnProperty.call(t,x)){D=q(t,x);if(D!==undefined)t[x]=D;else delete t[x]}return G.call(E,m,t)}var F;r=String(r);j.lastIndex=0;if(j.test(r))r=r.replace(j,function(E){return"\\u"+("0000"+E.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(r.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){F=eval("("+r+")");return typeof G==="function"?q({"":F},""):F}throw new SyntaxError("JSON.parse");}})();
var Mustache=function(){var g=function(){};g.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":true},context:{},render:function(b,u,j,k){if(!k){this.context=u;this.buffer=[]}if(!this.includes("",b))if(k)return b;else{this.send(b);return}b=this.render_pragmas(b);b=this.render_section(b,u,j);if(k)return this.render_tags(b,u,j,k);this.render_tags(b,u,j,k)},send:function(b){b!=""&&this.buffer.push(b)},render_pragmas:function(b){if(!this.includes("%",b))return b;
var u=this;return b.replace(RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag),function(j,k,i){if(!u.pragmas_implemented[k])throw{message:"This implementation of mustache doesn't understand the '"+k+"' pragma"};u.pragmas[k]={};if(i){j=i.split("=");u.pragmas[k][j[0]]=j[1]}return""})},render_partial:function(b,u,j){b=this.trim(b);if(!j||j[b]===undefined)throw{message:"unknown_partial '"+b+"'"};if(typeof u[b]!="object")return this.render(j[b],u,j,true);return this.render(j[b],u[b],j,true)},render_section:function(b,
u,j){if(!this.includes("#",b)&&!this.includes("^",b))return b;var k=this;return b.replace(RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg"),function(i,l,n,z){i=k.find(n,u);if(l=="^")return!i||k.is_array(i)&&i.length===0?k.render(z,u,j,true):"";else if(l=="#")return k.is_array(i)?k.map(i,function(r){return k.render(z,k.create_context(r),j,true)}).join(""):k.is_object(i)?k.render(z,k.create_context(i),j,true):typeof i==="function"?
i.call(u,z,function(r){return k.render(r,u,j,true)}):i?k.render(z,u,j,true):""})},render_tags:function(b,u,j,k){var i=this,l=function(){return RegExp(i.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+i.ctag+"+","g")},n=l(),z=function(G,q,F){switch(q){case "!":return"";case "=":i.set_delimiters(F);n=l();return"";case ">":return i.render_partial(F,u,j);case "{":return i.find(F,u);default:return i.escape(i.find(F,u))}};b=b.split("\n");for(var r=0;r<b.length;r++){b[r]=b[r].replace(n,z,this);k||this.send(b[r])}if(k)return b.join("\n")},
set_delimiters:function(b){b=b.split(" ");this.otag=this.escape_regex(b[0]);this.ctag=this.escape_regex(b[1])},escape_regex:function(b){if(!arguments.callee.sRE)arguments.callee.sRE=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");return b.replace(arguments.callee.sRE,"\\$1")},find:function(b,u){b=this.trim(b);var j;if(u[b]===false||u[b]===0||u[b])j=u[b];else if(this.context[b]===false||this.context[b]===0||this.context[b])j=this.context[b];if(typeof j==="function")return j.apply(u);
if(j!==undefined)return j;return""},includes:function(b,u){return u.indexOf(this.otag+b)!=-1},escape:function(b){return String(b===null?"":b).replace(/&(?!\w+;)|["<>\\]/g,function(u){switch(u){case "&":return"&amp;";case "\\":return"\\\\";case '"':return'"';case "<":return"&lt;";case ">":return"&gt;";default:return u}})},create_context:function(b){if(this.is_object(b))return b;else{var u=".";if(this.pragmas["IMPLICIT-ITERATOR"])u=this.pragmas["IMPLICIT-ITERATOR"].iterator;var j={};j[u]=b;return j}},
is_object:function(b){return b&&typeof b=="object"},is_array:function(b){return Object.prototype.toString.call(b)==="[object Array]"},trim:function(b){return b.replace(/^\s*|\s*$/g,"")},map:function(b,u){if(typeof b.map=="function")return b.map(u);else{for(var j=[],k=b.length,i=0;i<k;i++)j.push(u(b[i]));return j}}};return{name:"mustache.js",version:"0.3.1-dev",to_html:function(b,u,j,k){var i=new g;if(k)i.send=k;i.render(b,u,j);if(!k)return i.buffer.join("\n")}}}();
(function(g){g.mustache=function(b,u,j){return Mustache.to_html(b,u,j)}})(jQuery);
(function(g){g.fn.layout=function(b){function u(c){if(!c)return true;var d=c.keyCode;if(d<33)return true;var e={38:"north",40:"south",37:"west",39:"east"},f=d>=37&&d<=40,h=c.shiftKey,p=c.ctrlKey,y=false,s,B,v;if(!p&&!h)return true;else if(f&&r[e[d]].enableCursorHotkey)y=e[d];else g.each(A.borderPanes.split(","),function(C,K){s=r[K];B=s.customHotkey;v=s.customHotkeyModifier;if(h&&v=="SHIFT"||p&&v=="CTRL"||p&&h)if(B&&d==(isNaN(B)||B<=9?B.toUpperCase().charCodeAt(0):B)){y=K;return false}});if(!y)return true;
s=r[y];e=q[y];if(!s.enableCursorHotkey||e.isHidden||!L[y])return true;if((e=c.target||c.srcElement)&&h&&f&&(e.tagName=="TEXTAREA"||e.tagName=="INPUT"&&(d==37||d==39)))return true;ea(y);c.stopPropagation();return c.returnValue=false}function j(c){if(this&&this.tagName)c=this;c=typeof c=="string"?L[c]:g(c).attr("pane")?g(c):g(c).parents("div[pane]:first");if(c.length){var d=c.attr("pane"),e=q[d];e.cssSaved&&k(d);if(e.isSliding||e.isResizing||e.isClosed)e.cssSaved=false;else{var f={zIndex:A.zIndex.pane_normal+
1},h={},p=c.css("overflow"),y=c.css("overflowX"),s=c.css("overflowY");if(p!="visible"){h.overflow=p;f.overflow="visible"}if(y&&y!="visible"&&y!="auto"){h.overflowX=y;f.overflowX="visible"}if(s&&s!="visible"&&s!="auto"){h.overflowY=y;f.overflowY="visible"}e.cssSaved=h;c.css(f);g.each(A.allPanes.split(","),function(B,v){v!=d&&k(v)})}}}function k(c){if(this&&this.tagName)c=this;c=typeof c=="string"?L[c]:g(c).hasClass("ui-layout-pane")?g(c):g(c).parents("div[pane]:first");if(c.length){var d=c.attr("pane");
d=q[d];var e=d.cssSaved||{};!d.isSliding&&!d.isResizing&&c.css("zIndex",A.zIndex.pane_normal);c.css(e);d.cssSaved=false}}function i(c,d,e){var f=g(c);if(f.length)if(A.borderPanes.indexOf(d)==-1)alert("Error Adding Button \n\nInvalid pane: "+d);else{c=r[d].buttonClass+"-"+e;f.addClass(c+" "+c+"-"+d);return f}else alert("Error Adding Button \n\nInvalid selector: "+c);return false}function l(c,d){g.each(A[c].pins,function(e,f){n(g(f),c,d)})}function n(c,d,e){var f=c.attr("pin");if(!(f&&e==(f=="down"))){var h=
r[d].buttonClass+"-pin",p=h+"-"+d;d=h+"-up";f=p+"-up";h+="-down";p+="-down";c.attr("pin",e?"down":"up").attr("title",e?"Un-Pin":"Pin").removeClass(e?d:h).removeClass(e?f:p).addClass(e?h:d).addClass(e?p:f)}}var z={paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",togglerInnerClass:"ui-layout-",buttonClass:"ui-layout-button",contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore"},r={name:"",scrollToBookmarkOnLoad:true,defaults:{applyDefaultStyles:false,
closable:true,resizable:true,slidable:true,contentSelector:z.contentSelector,contentIgnoreSelector:z.contentIgnoreSelector,paneClass:z.paneClass,resizerClass:z.resizerClass,togglerClass:z.togglerClass,buttonClass:z.buttonClass,resizerDragOpacity:1,maskIframesOnResize:true,minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerTip_open:"Close",togglerTip_closed:"Open",resizerTip:"Resize",sliderTip:"Slide Open",
sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseout",hideTogglerOnSlide:false,togglerContent_open:"",togglerContent_closed:"",showOverflowOnHover:false,enableCursorHotkey:true,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},initClosed:false,initHidden:false},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize"},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize"},east:{paneSelector:".ui-layout-east",size:200,
resizerCursor:"e-resize"},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize"},center:{paneSelector:".ui-layout-center"}},G={slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}}},q={id:Math.floor(Math.random()*1E4),container:{},north:{},south:{},east:{},
west:{},center:{}},F={north:"south",south:"north",east:"west",west:"east"},E=function(c){if(typeof c=="string")return true;else if(typeof c=="object")try{return c.constructor.toString().match(/string/i)!==null}catch(d){}return false},m=function(c){return typeof c=="string"||E(c)?g.trim(c):c},x=function(c,d){return Math.max(c,d)},D=function(c){var d={defaults:{fxSettings:{}},north:{fxSettings:{}},south:{fxSettings:{}},east:{fxSettings:{}},west:{fxSettings:{}},center:{fxSettings:{}}};c=c||{};if(c.effects||
c.defaults||c.north||c.south||c.west||c.east||c.center)d=g.extend(d,c);else g.each(c,function(e,f){a=e.split("__");d[a[1]?a[0]:"defaults"][a[1]?a[1]:a[0]]=f});return d},t=function(c,d,e){function f(y){p=A[y];if(p.doCallback){cpPane=p.callback.split(",")[1];cpPane!=y&&cpPane!=d&&f(cpPane,true)}else{p.doCallback=true;p.callback=h}}var h=c+","+d+","+(e?1:0),p;g.each(A.borderPanes.split(","),function(y,s){if(A[s].isMoving){f(s);return false}})},I=function(c){c=A[c];A.isLayoutBusy=false;delete c.isMoving;
if(c.doCallback&&c.callback){c.doCallback=false;var d=c.callback.split(","),e=d[2]>0?true:false;if(d[0]=="open")Y(d[1],e);else d[0]=="close"&&W(d[1],e);if(!c.doCallback)c.callback=null}},J=function(c,d){if(d){var e;try{if(typeof d=="function")e=d;else if(typeof d!="string")return;else if(d.indexOf(",")>0){var f=d.split(",");e=eval(f[0]);if(typeof e=="function"&&f.length>1)return e(f[1])}else e=eval(d);if(typeof e=="function")return e(c,L[c],g.extend({},q[c]),g.extend({},r[c]),r.name)}catch(h){}}},
M=function(c,d){var e=0,f=false,h="";if(!g.browser.msie)if(g.curCSS(c[0],"display",true)=="none"){f=true;h=g.curCSS(c[0],"visibility",true);c.css({display:"block",visibility:"hidden"})}e=parseInt(g.curCSS(c[0],d,true),10)||0;if(f){c.css({display:"none"});h&&h!="hidden"&&c.css({visibility:h})}return e},P=function(c,d){var e;if(E(c)){c=m(c);e=L[c]}else e=g(c);if(d<=0)return 0;else d>0||(d=E(c)?U(c):e.outerWidth());return g.boxModel?d-M(e,"paddingLeft")-M(e,"paddingRight")-(g.curCSS(e[0],"borderLeftStyle",
true)=="none"?0:M(e,"borderLeftWidth"))-(g.curCSS(e[0],"borderRightStyle",true)=="none"?0:M(e,"borderRightWidth")):d},Q=function(c,d){var e;if(E(c)){c=m(c);e=L[c]}else e=g(c);if(d<=0)return 0;else d>0||(d=E(c)?U(c):e.outerHeight());return g.boxModel?d-M(e,"paddingTop")-M(e,"paddingBottom")-(g.curCSS(e[0],"borderTopStyle",true)=="none"?0:M(e,"borderTopWidth"))-(g.curCSS(e[0],"borderBottomStyle",true)=="none"?0:M(e,"borderBottomWidth")):d},U=function(c,d){var e=L[c],f=r[c],h=q[c],p=d?f.spacing_open:
0;f=d?f.spacing_closed:0;return!e||h.isHidden?0:h.isClosed||h.isSliding&&d?f:A[c].dir=="horz"?e.outerHeight()+p:e.outerWidth()+p},V=function(c){var d=H,e=A[c].dir,f=q[c],h=L[F[c]],p=r[c].spacing_open,y=r[F[c]].spacing_open,s=!h?0:e=="horz"?h.outerHeight():h.outerWidth();h=f.minSize||0;e=Math.min(f.maxSize||9999,(e=="horz"?d.innerHeight:d.innerWidth)-p-s-y);var B,v;switch(c){case "north":B=d.offsetTop+h;v=d.offsetTop+e;break;case "west":B=d.offsetLeft+h;v=d.offsetLeft+e;break;case "south":B=d.offsetTop+
d.innerHeight-e;v=d.offsetTop+d.innerHeight-h;break;case "east":B=d.offsetLeft+d.innerWidth-e;v=d.offsetLeft+d.innerWidth-h}g.extend(f,{minSize:h,maxSize:e,minPosition:B,maxPosition:v})},na=function(){var c={top:U("north",true),bottom:U("south",true),left:U("west",true),right:U("east",true),width:0,height:0};with(c){width=H.innerWidth-left-right;height=H.innerHeight-bottom-top;top+=H.top;bottom+=H.bottom;left+=H.left;right+=H.right}return c},oa=function(c){var d={},e,f,h;g.each("Left,Right,Top,Bottom".split(","),
function(){e=m(this);f=d["border"+e]=M(c,"border"+e+"Width");h=d["padding"+e]=M(c,"padding"+e);d["offset"+e]=f+h;if(c==R)d[e.toLowerCase()]=g.boxModel?h:0});d.innerWidth=d.outerWidth=c.outerWidth();d.innerHeight=d.outerHeight=c.outerHeight();if(g.boxModel){d.innerWidth-=d.offsetLeft+d.offsetRight;d.innerHeight-=d.offsetTop+d.offsetBottom}return d},sa=function(c,d,e,f){var h=window.layout=window.layout||{};h=h.timers=h.timers||{};c="layout_"+q.id+"_"+c+"_"+d;h[c]||(h[c]=setTimeout(e,f))},fa=function(c,
d){var e=window.layout=window.layout||{};e=e.timers=e.timers||{};var f="layout_"+q.id+"_"+c+"_"+d;if(e[f]){clearTimeout(e[f]);delete e[f];return true}else return false},ta=function(){try{if(R[0].tagName=="BODY"){g("html").css({height:"100%",overflow:"hidden"});g("body").css({position:"relative",height:"100%",overflow:"hidden",margin:0,padding:0,border:"none"})}else{var c={overflow:"hidden"},d=R.css("position"),e=R.css("height");if(!R.hasClass("ui-layout-pane")){if(!d||"fixed,absolute,relative".indexOf(d)<
0)c.position="relative";if(!e||e=="auto")c.height="100%"}R.css(c)}}catch(f){}H=q.container=oa(R)},ua=function(){g.each(A.borderPanes.split(","),function(c,d){var e=r[d];if(e.enableCursorHotkey||e.customHotkey){g(document).keydown(u);return false}})},va=function(){b=D(b);if(b.effects){g.extend(G,b.effects);delete b.effects}g.each("name,scrollToBookmarkOnLoad".split(","),function(e,f){if(b[f]!==undefined)r[f]=b[f];else if(b.defaults[f]!==undefined){r[f]=b.defaults[f];delete b.defaults[f]}});g.each("paneSelector,resizerCursor,customHotkey".split(","),
function(e,f){delete b.defaults[f]});g.extend(r.defaults,b.defaults);A.center=g.extend(true,{},A.defaults,A.center);g.extend(r.center,b.center);var c=g.extend(true,{},r.defaults,b.defaults,r.center);g.each("paneClass,contentSelector,contentIgnoreSelector,applyDefaultStyles,showOverflowOnHover".split(","),function(e,f){r.center[f]=c[f]});var d=r.defaults;g.each(A.borderPanes.split(","),function(e,f){A[f]=g.extend(true,{},A.defaults,A[f]);o=r[f]=g.extend(true,{},r.defaults,r[f],b.defaults,b[f]);if(!o.paneClass)o.paneClass=
z.paneClass;if(!o.resizerClass)o.resizerClass=z.resizerClass;if(!o.togglerClass)o.togglerClass=z.togglerClass;g.each(["_open","_close",""],function(h,p){var y="fxName"+p,s="fxSpeed"+p,B="fxSettings"+p;o[y]=b[f][y]||b[f].fxName||b.defaults[y]||b.defaults.fxName||o[y]||o.fxName||d[y]||d.fxName||"none";var v=o[y];if(v=="none"||!g.effects||!g.effects[v]||!G[v]&&!o[B]&&!o.fxSettings)v=o[y]="none";v=G[v]||{};y=v.all||{};v=v[f]||{};o[B]=g.extend({},y,v,d.fxSettings||{},d[B]||{},o.fxSettings,o[B],b.defaults.fxSettings,
b.defaults[B]||{},b[f].fxSettings,b[f][B]||{});o[s]=b[f][s]||b[f].fxSpeed||b.defaults[s]||b.defaults.fxSpeed||o[s]||o[B].duration||o.fxSpeed||o.fxSettings.duration||d.fxSpeed||d.fxSettings.duration||v.duration||y.duration||"normal"})})},pa=function(){g.each(A.allPanes.split(","),function(){var c=m(this),d=r[c],e=q[c],f=A[c].dir,h=d.size=="auto"||isNaN(d.size)?0:d.size,p=d.minSize||1,y=d.maxSize||9999,s=d.spacing_open||0,B=d.paneSelector,v={},C;aa[c]=false;if(B.substr(0,1)==="#")C=L[c]=R.find(B+":first");
else{C=L[c]=R.children(B+":first");C.length||(C=L[c]=R.children("form:first").children(B+":first"))}if(!C.length){L[c]=false;return true}C.attr("pane",c).addClass(d.paneClass+" "+d.paneClass+"-"+c);if(c!="center"){e.isClosed=false;e.isSliding=false;e.isResizing=false;e.isHidden=false;e.noRoom=false;A[c].pins=[]}v=g.extend({visibility:"visible",display:"block"},A.defaults.cssReq,A[c].cssReq);d.applyDefaultStyles&&g.extend(v,A.defaults.cssDef,A[c].cssDef);C.css(v);v={};switch(c){case "north":v.top=
H.top;v.left=H.left;v.right=H.right;break;case "south":v.bottom=H.bottom;v.left=H.left;v.right=H.right;break;case "west":v.left=H.left;break;case "east":v.right=H.right}if(f=="horz"){if(h===0||h=="auto"){C.css({height:"auto"});h=C.outerHeight()}h=x(h,p);h=Math.min(h,y);h=Math.min(h,H.innerHeight-s);v.height=x(1,Q(c,h));e.size=h;e.maxSize=y;e.minSize=x(p,h-v.height+1);C.css(v)}else if(f=="vert"){if(h===0||h=="auto"){C.css({width:"auto","float":"left"});h=C.outerWidth();C.css({"float":"none"})}h=x(h,
p);h=Math.min(h,y);h=Math.min(h,H.innerWidth-s);v.width=x(1,P(c,h));e.size=h;e.maxSize=y;e.minSize=x(p,h-v.width+1);C.css(v);Z(c,null,true)}else if(c=="center"){C.css(v);Z("center",null,true)}if(d.initClosed&&d.closable){C.hide().addClass("closed");e.isClosed=true}else if(d.initHidden||d.initClosed){ia(c,true);e.isHidden=true}else C.addClass("open");d.showOverflowOnHover&&C.hover(j,k);if(d.contentSelector){e=aa[c]=C.children(d.contentSelector+":first");if(!e.length){aa[c]=false;return true}e.css(A.content.cssReq);
d.applyDefaultStyles&&e.css(A.content.cssDef);C.css({overflow:"hidden"})}})},wa=function(){g.each(A.borderPanes.split(","),function(){var c=m(this),d=r[c],e=q[c],f=d.resizerClass,h=d.togglerClass,p=L[c];S[c]=false;ba[c]=false;if(!(!p||!d.closable&&!d.resizable)){var y=A[c].edge;p=p.is(":visible");var s="-"+c,B=p?"-open":"-closed",v;v=S[c]=g("<span></span>");p&&d.resizable||!p&&d.slidable&&v.attr("title",d.sliderTip).css("cursor",d.sliderCursor);v.attr("id",d.paneSelector.substr(0,1)=="#"?d.paneSelector.substr(1)+
"-resizer":"").attr("resizer",c).css(A.resizers.cssReq).css(y,H[y]+U(c)).addClass(f+" "+f+s+" "+f+B+" "+f+s+B).appendTo(R);d.applyDefaultStyles&&v.css(A.resizers.cssDef);if(d.closable){f=ba[c]=g("<div></div>");f.attr("id",d.paneSelector.substr(0,1)=="#"?d.paneSelector.substr(1)+"-toggler":"").css(A.togglers.cssReq).attr("title",p?d.togglerTip_open:d.togglerTip_closed).click(function(C){ea(c);C.stopPropagation()}).mouseover(function(C){C.stopPropagation()}).addClass(h+" "+h+s+" "+h+B+" "+h+s+B).appendTo(v);
if(d.togglerContent_open)g("<span>"+d.togglerContent_open+"</span>").addClass("content content-open").css("display",e.isClosed?"none":"block").appendTo(f);if(d.togglerContent_closed)g("<span>"+d.togglerContent_closed+"</span>").addClass("content content-closed").css("display",e.isClosed?"block":"none").appendTo(f);d.applyDefaultStyles&&f.css(A.togglers.cssDef);p||ja(c,true)}}});ca("all",true)},xa=function(){var c=typeof g.fn.draggable=="function",d;g.each(A.borderPanes.split(","),function(){var e=
m(this),f=r[e],h=q[e];if(!c||!L[e]||!f.resizable){f.resizable=false;return true}var p=f.resizerClass,y=p+"-drag",s=p+"-"+e+"-drag",B=p+"-dragging",v=p+"-"+e+"-dragging",C=false,K=S[e];h.isClosed||K.attr("title",f.resizerTip).css("cursor",f.resizerCursor);K.draggable({containment:R[0],axis:A[e].dir=="horz"?"y":"x",delay:200,distance:1,helper:"clone",opacity:f.resizerDragOpacity,zIndex:A.zIndex.resizing,start:function(){if(false===J(e,f.onresize_start))return false;h.isResizing=true;fa(e,"closeSlider");
K.addClass(y+" "+s);C=false;var N=e=="east"||e=="south"?f.spacing_open:0;V(e);h.minPosition-=N;h.maxPosition-=N;d=A[e].dir=="horz"?"top":"left";g(f.maskIframesOnResize===true?"iframe":f.maskIframesOnResize).each(function(){g('<div class="ui-layout-mask"/>').css({background:"#fff",opacity:"0.001",zIndex:9,position:"absolute",width:this.offsetWidth+"px",height:this.offsetHeight+"px"}).css(g(this).offset()).appendTo(this.parentNode)})},drag:function(N,O){if(!C){g(".ui-draggable-dragging").addClass(B+
" "+v).children().css("visibility","hidden");C=true;h.isSliding&&L[e].css("zIndex",A.zIndex.sliding)}if(O.position[d]<h.minPosition)O.position[d]=h.minPosition;else if(O.position[d]>h.maxPosition)O.position[d]=h.maxPosition},stop:function(N,O){var T=O.position,X;K.removeClass(y+" "+s);switch(e){case "north":X=T.top;break;case "west":X=T.left;break;case "south":X=H.outerHeight-T.top-K.outerHeight();break;case "east":X=H.outerWidth-T.left-K.outerWidth()}ka(e,X-H[A[e].edge]);g("div.ui-layout-mask").remove();
h.isResizing=false}})})},ia=function(c,d){var e=r[c],f=q[c],h=L[c],p=S[c];if(!(!h||f.isHidden))if(false!==J(c,e.onhide_start)){f.isSliding=false;p&&p.hide();if(d||f.isClosed){f.isClosed=true;f.isHidden=true;h.hide();Z(A[c].dir=="horz"?"all":"center");J(c,e.onhide_end||e.onhide)}else{f.isHiding=true;W(c,false)}}},ga=function(c,d){var e=r[c],f=q[c],h=S[c];if(L[c]&&f.isHidden)if(false!==J(c,e.onshow_start)){f.isSliding=false;f.isShowing=true;h&&e.spacing_open>0&&h.show();d===false?W(c,true):Y(c)}},ea=
function(c){var d=q[c];if(d.isHidden)ga(c);else d.isClosed?Y(c):W(c)},W=function(c,d,e){function f(){ja(c,true);O||J(c,s.onclose_end||s.onclose);if(O)J(c,s.onshow_end||s.onshow);if(T)J(c,s.onhide_end||s.onhide);I(c)}var h=L[c],p=S[c],y=ba[c],s=r[c],B=q[c];e=!e&&!B.isClosed&&s.fxName_close!="none";var v=A[c].edge,C=s.resizerClass,K=s.togglerClass,N="-"+c,O=B.isShowing,T=B.isHiding;delete B.isShowing;delete B.isHiding;if(!(!h||!s.resizable&&!s.closable))if(!(!d&&B.isClosed&&!O))if(A.isLayoutBusy)t("close",
c,d);else if(!(!O&&false===J(c,s.onclose_start))){A[c].isMoving=true;A.isLayoutBusy=true;B.isClosed=true;if(T)B.isHidden=true;else if(O)B.isHidden=false;l(c,false);B.isSliding||Z(A[c].dir=="horz"?"all":"center");if(p){p.css(v,H[v]).removeClass(C+"-open "+C+N+"-open").removeClass(C+"-sliding "+C+N+"-sliding").addClass(C+"-closed "+C+N+"-closed");s.resizable&&p.draggable("disable").css("cursor","default").attr("title","");y&&y.removeClass(K+"-open "+K+N+"-open").addClass(K+"-closed "+K+N+"-closed").attr("title",
s.togglerTip_closed);ca()}if(e){ha(c,true);h.hide(s.fxName_close,s.fxSettings_close,s.fxSpeed_close,function(){ha(c,false);B.isClosed&&f()})}else{h.hide();f()}}},Y=function(c,d,e){function f(){B.isSliding||Z(A[c].dir=="vert"?"center":"all");if(p){p.css(v,H[v]+U(c)).removeClass(C+T+" "+C+N+T).addClass(C+O+" "+C+N+O).addClass(!B.isSliding?"":C+X+" "+C+N+X);s.resizable?p.draggable("enable").css("cursor",s.resizerCursor).attr("title",s.resizerTip):p.css("cursor","default");y&&y.removeClass(K+T+" "+K+
N+T).addClass(K+O+" "+K+N+O).attr("title",s.togglerTip_open);ca("all")}da(c);l(c,!B.isSliding);J(c,s.onopen_end||s.onopen);if(la)J(c,s.onshow_end||s.onshow);I(c)}var h=L[c],p=S[c],y=ba[c],s=r[c],B=q[c];e=!e&&B.isClosed&&s.fxName_open!="none";var v=A[c].edge,C=s.resizerClass,K=s.togglerClass,N="-"+c,O="-open",T="-closed",X="-sliding",la=B.isShowing;delete B.isShowing;if(!(!h||!s.resizable&&!s.closable))if(B.isClosed||B.isSliding)if(B.isHidden&&!la)ga(c,true);else if(A.isLayoutBusy)t("open",c,d);else if(false!==
J(c,s.onopen_start)){A[c].isMoving=true;A.isLayoutBusy=true;B.isSliding&&!d&&ma(c,false);B.isClosed=false;if(la)B.isHidden=false;V(c);B.size>B.maxSize&&h.css(A[c].sizeType,x(1,A[c].dir=="horz"?Q(c,B.maxSize):P(c,B.maxSize)));ja(c,false);if(e){ha(c,true);h.show(s.fxName_open,s.fxSettings_open,s.fxSpeed_open,function(){ha(c,false);B.isClosed||f()})}else{h.show();f()}}},ha=function(c,d){var e=L[c];if(d){e.css({zIndex:A.zIndex.animation});if(c=="south")e.css({top:H.top+H.innerHeight-e.outerHeight()});
else c=="east"&&e.css({left:H.left+H.innerWidth-e.outerWidth()})}else{q[c].isSliding||e.css({zIndex:A.zIndex.pane_normal});if(c=="south")e.css({top:"auto"});else c=="east"&&e.css({left:"auto"})}},ja=function(c,d){var e=r[c],f=S[c],h=e.slideTrigger_open;if(f&&e.slidable){if(h!="click"&&h!="dblclick"&&h!="mouseover")h="click";f[d?"bind":"unbind"](h,ya).css("cursor",d?e.sliderCursor:"default").attr("title",d?e.sliderTip:"")}},ma=function(c,d){function e(y){fa(c,"closeSlider");y.stopPropagation()}var f=
r[c].slideTrigger_close,h=L[c],p=S[c];q[c].isSliding=d;fa(c,"closeSlider");h.css({zIndex:d?A.zIndex.sliding:A.zIndex.pane_normal});p.css({zIndex:d?A.zIndex.sliding:A.zIndex.resizer_normal});if(f!="click"&&f!="mouseout")f="mouseout";if(d){h.bind(f,qa);p.bind(f,qa);f="mouseout";h.bind("mouseover",e);p.bind("mouseover",e)}else{h.unbind(f);p.unbind(f);f="mouseout";h.unbind("mouseover");p.unbind("mouseover");fa(c,"closeSlider")}},ya=function(){var c=g(this).attr("resizer");if(q[c].isClosed){ma(c,true);
Y(c,true)}},qa=function(){function c(){ma(e,false);f.isClosed||W(e)}var d=g(this),e=d.attr("pane")||d.attr("resizer");d=r[e];var f=q[e];f.isClosed||f.isResizing||(d.slideTrigger_close=="click"?c():sa(e,"closeSlider",c,300))},ka=function(c,d){var e=A[c].edge,f=A[c].dir,h=r[c],p=q[c],y=L[c],s=S[c];V(c);p.minSize=x(p.minSize,h.minSize);if(h.maxSize>0)p.maxSize=Math.min(p.maxSize,h.maxSize);d=x(d,p.minSize);d=Math.min(d,p.maxSize);p.size=d;s.css(e,d+H[e]);y.css(A[c].sizeType,x(1,A[c].dir=="horz"?Q(c,
d):P(c,d)));p.isSliding||Z(f=="horz"?"all":"center");ca();da(c);J(c,h.onresize_end||h.onresize)},Z=function(c,d,e){if(!c||c=="all")c="east,west,center";var f=na();d&&g.extend(f,d);g.each(c.split(","),function(){if(L[this]){var h=m(this),p=r[h],y=q[h],s=L[h],B=S[h],v=true,C={};if(h=="center"){f=na();C=g.extend({},f);C.width=x(1,P(h,C.width));C.height=x(1,Q(h,C.height));v=C.width>1&&C.height>1;if(g.browser.msie&&(!g.boxModel||g.browser.version<7)){L.north&&L.north.css({width:P(L.north,H.innerWidth)});
L.south&&L.south.css({width:P(L.south,H.innerWidth)})}}else{C.top=f.top;C.bottom=f.bottom;C.height=x(1,Q(h,f.height));v=C.height>1}if(v){s.css(C);if(y.noRoom){y.noRoom=false;if(y.isHidden)return;else ga(h,!y.isClosed)}if(!e){da(h);J(h,p.onresize_end||p.onresize)}}else if(!y.noRoom){y.noRoom=true;if(!y.isHidden)if(e){s.hide();B&&B.hide()}else ia(h)}}})},da=function(c){if(!c||c=="all")c=A.allPanes;g.each(c.split(","),function(){if(aa[this]){var d=m(this),e=r[d].contentIgnoreSelector,f=L[d];d=aa[d];
var h=d[0],p=Q(f);f.children().each(function(){if(this!=h){var y=g(this);if(!e||!y.is(e))p-=y.outerHeight()}});if(p>0)p=Q(d,p);p<1?d.hide():d.css({height:p}).show()}})},ca=function(c,d){if(!c||c=="all")c=A.borderPanes;g.each(c.split(","),function(){var e=m(this),f=r[e],h=q[e],p=L[e],y=S[e],s=ba[e];if(!(!p||!y||!f.resizable&&!f.closable)){var B=A[e].dir,v=h.isClosed?"_closed":"_open";e=f["spacing"+v];var C=f["togglerAlign"+v];v=f["togglerLength"+v];var K;if(e==0)y.hide();else{!h.noRoom&&!h.isHidden&&
y.show();if(B=="horz"){K=p.outerWidth();y.css({width:x(1,P(y,K)),height:x(1,Q(y,e)),left:M(p,"left")})}else{K=p.outerHeight();y.css({height:x(1,Q(y,K)),width:x(1,P(y,e)),top:H.top+U("north",true)})}if(s){if(v==0||h.isSliding&&f.hideTogglerOnSlide){s.hide();return}else s.show();if(!(v>0)||v=="100%"||v>K){v=K;p=0}else if(typeof C=="string")switch(C){case "top":case "left":p=0;break;case "bottom":case "right":p=K-v;break;default:p=Math.floor((K-v)/2)}else{p=parseInt(C);p=C>=0?p:K-v+p}K=f.togglerContent_open?
s.children(".content-open"):false;var N=f.togglerContent_closed?s.children(".content-closed"):false;C=h.isClosed?N:K;if(K)K.css("display",h.isClosed?"none":"block");if(N)N.css("display",h.isClosed?"block":"none");if(B=="horz"){h=P(s,v);s.css({width:x(0,h),height:x(1,Q(s,e)),left:p});C&&C.css("marginLeft",Math.floor((h-C.outerWidth())/2))}else{h=Q(s,v);s.css({height:x(0,h),width:x(1,P(s,e)),top:p});C&&C.css("marginTop",Math.floor((h-C.outerHeight())/2))}}if(d&&f.initHidden){y.hide();s&&s.hide()}}}})},
ra=function(){var c=H.innerWidth,d=H.innerHeight;H=q.container=oa(R);var e=H.innerHeight<d,f=H.innerWidth<c,h,p;if(e||f)g.each(["south","north","east","west"],function(y,s){h=q[s];p=A[s].dir;if(!h.isClosed&&(e&&p=="horz"||f&&p=="vert")){V(s);h.size>h.maxSize&&ka(s,h.maxSize)}});Z("all");ca("all")},R=g(this).css({overflow:"hidden"}),L={},aa={},S={},ba={},A={allPanes:"north,south,east,west,center",borderPanes:"north,south,east,west",zIndex:{resizer_normal:1,pane_normal:2,mask:4,sliding:100,resizing:1E4,
animation:1E4},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden",zIndex:1},cssDef:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDef:{background:"#AAA"}},content:{cssReq:{overflow:"auto"},cssDef:{}},defaults:{cssReq:{position:"absolute",margin:0,zIndex:2},cssDef:{padding:"10px",background:"#FFF",border:"1px solid #BBB",
overflow:"auto"}},north:{edge:"top",sizeType:"height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{edge:"bottom",sizeType:"height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{edge:"right",sizeType:"width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{edge:"left",sizeType:"width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",
right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},H=q.container;(function(){va();ta();pa();wa();xa();da("all");if(r.scrollToBookmarkOnLoad)with(self.location)hash&&replace(hash);ua();g(window).resize(function(){var c="timerLayout_"+q.id;window[c]&&clearTimeout(window[c]);window[c]=null;window[c]=setTimeout(ra,100)})})();return{options:r,state:q,panes:L,toggle:ea,open:Y,close:W,hide:ia,show:ga,resizeContent:da,sizePane:ka,reinitPane:pa,resizeAll:ra,addToggleBtn:function(c,d){var e=
i(c,d,"toggle");if(e)e.attr("title",q[d].isClosed?"Open":"Close").click(function(f){ea(d);f.stopPropagation()})},addOpenBtn:function(c,d){var e=i(c,d,"open");e&&e.attr("title","Open").click(function(f){Y(d);f.stopPropagation()})},addCloseBtn:function(c,d){var e=i(c,d,"close");e&&e.attr("title","Close").click(function(f){W(d);f.stopPropagation()})},addPinBtn:function(c,d){var e=i(c,d,"pin");if(e){var f=q[d];e.click(function(h){n(g(this),d,f.isSliding||f.isClosed);f.isSliding||f.isClosed?Y(d):W(d);
h.stopPropagation()});n(e,d,!f.isClosed&&!f.isSliding);A[d].pins.push(c)}},allowOverflow:j,resetOverflow:k,cssWidth:P,cssHeight:Q}}})(jQuery);
(function(){var g=function(){var b=null,u=function(j,k){var i=$($.mustache(k,j.tag));i.data("data",j);i.find(".tag-menu").hide();i.find(".color-selector").bind("click",function(l){var n=b.tagList.find(".tag-menu");l=$(l.target);if(n.data("visible")===true&&n.data("tagId")===j.tag.id){n.hide("fast");n.data("visible",false);n.data("tagId",null);n.data("tag",null);n.data("target",null)}else{n.show("fast");n.css({left:i.position().left,top:i.position().top-100});n.data("visible",true);n.data("tagId",
j.tag.id);n.data("tag",j);n.data("target",l)}});return i};return{options:{},_create:function(){b=this;b.toolbar=$('<div id="tag-toolbar"></div>');b.addTagInput=$('<input type="text" value="" id="add-tag"/>');b.addTagButton=$('<button id="tag-new">Create Tag</button>');b.tagList=$('<div class="tags"></div>');b.element.append(b.toolbar);b.toolbar.append(b.addTagInput);b.toolbar.append(b.addTagButton);b.element.append(b.tagList);b.addTagButton.button({text:false,icons:{primary:"ui-icon-plusthick"}});
Tag.Index({successCallback:function(j,k){for(var i=0;i<k.length;i++)b.tagList.append(u(k[i],j));var l=b.tagList.find(".tag-menu").first();b.tagList.find(".tag-menu").remove();b.tagList.append(l);l.find(".color").bind("click",function(n){var z=$(n.target).attr("data-colorclass");n=l.data("tag");var r=n.tag.color_class,G=l.data("target");n.tag.color_class=z;Tag.Update({send:n,successCallback:function(q,F){G.parent(".tag").removeClass(r);G.parent(".tag").addClass(z);G.removeClass(r);G.addClass(z);l.hide("fast");
l.data("visible",false);l.data("tagId",null);l.data("tag",null);l.data("target",null);G.data("data",F)},tags:n.tag.id})});l.find(".delete-label").bind("click",function(){var n=l.data("tag"),z=l.data("target");l.hide();var r=function(){Tag.Destroy({successCallback:function(){z.hide("fast",function(){z.parent(".tag").remove()})},tags:n.tag.id})};if(typeof b.deleteDialog==="undefined")b.deleteDialog=$.confirmationDialog("Delete Tag",r,"Cancel","Delete Tag and remove it from all lists?");b.deleteDialog.dialog("open");
return false})}});b.addTagButton.bind("click",function(){if($.trim(b.addTagInput.val())!==""&&b.tagList.find(".tag-name:HasExactValue('"+$.trim(b.addTagInput.val())+"')").length===0){var j={};j.tag={name:b.addTagInput.val(),color_class:"c1"};Tag.Create({send:j,successCallback:function(k,i){var l=u(i,k);b.tagList.prepend(l);b.addTagInput.val("");b.addTagInput.trigger("keyup")}});return false}});b.addTagInput.bind("keyup","return",function(){b.addTagButton.trigger("click")});b.addTagInput.bind("keyup",
function(){var j=$(this).val();if(j==="")b.tagList.find(".tag").show();else{b.tagList.find(".tag:not(:Contains('"+j+"'))").hide();b.tagList.find(".tag:Contains('"+j+"')").show()}b.tagList.find(".tag-name:HasExactValue('"+$.trim(j)+"')").length>0?b.addTagButton.button("option","disabled",true):b.addTagButton.button("option","disabled",false)})},destroy:function(){b.element.children().remove()}}}();$.widget("ui.TagView",g)})();
